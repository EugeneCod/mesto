(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._host=e.host,this._token=e.token}var n,r;return n=t,(r=[{key:"_getJsonOrError",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"_getHeaders",value:function(){return{authorization:this._token,"Content-Type":"application/json"}}},{key:"getUserInfo",value:function(){return fetch("".concat(this._host,"/users/me"),{headers:this._getHeaders()}).then(this._getJsonOrError)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._host,"/users/me"),{method:"PATCH",headers:this._getHeaders(),body:JSON.stringify({name:e.name,about:e.about})}).then(this._getJsonOrError)}},{key:"setAvatar",value:function(e){return fetch("".concat(this._host,"/users/me/avatar "),{method:"PATCH",headers:this._getHeaders(),body:JSON.stringify({avatar:e.avatar})}).then(this._getJsonOrError)}},{key:"getCards",value:function(){return fetch("".concat(this._host,"/cards"),{headers:this._getHeaders()}).then(this._getJsonOrError)}},{key:"addCard",value:function(e){return fetch("".concat(this._host,"/cards"),{method:"POST",headers:this._getHeaders(),body:JSON.stringify({name:e.name,link:e.link})}).then(this._getJsonOrError)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._host,"/cards/").concat(e),{method:"DELETE",headers:this._getHeaders()})}},{key:"toggleLike",value:function(e,t){var n;return n=e?"DELETE":"PUT",fetch("".concat(this._host,"/cards/").concat(t,"/likes"),{method:"".concat(n),headers:this._getHeaders()}).then(this._getJsonOrError)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n=t.config;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=document.querySelector(n.nameSelector),this.about=document.querySelector(n.aboutSelfSelector),this.profileImage=document.querySelector(n.profileImageSelector)}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return this.userInfo={name:this.name.textContent,about:this.about.textContent}}},{key:"setUserInfo",value:function(e){this.name.textContent=e.name,this.about.textContent=e.about}},{key:"getUserAvatar",value:function(){return this.profileImage.src}},{key:"setUserAvatar",value:function(e){this.profileImage.src=e.avatar}},{key:"getUserId",value:function(){return this.id}},{key:"setUserId",value:function(e){this.id=e._id}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o=document.querySelector(".profile__edit-button"),i=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__image"),c=".editing-form",u={cardTemplateSelector:"#card-template",contentTemplateSelector:".elements__element",buttonLikeSelector:".elements__button-like",likesCounterSelector:".elements__likes-counter",buttonDeleteSelector:".elements__button-delete",imageSelector:".elements__image",locationSelector:".elements__location",buttonLikeActiveClass:"elements__button-like_active"};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=t.popupSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(n),this._popupOpenClass="popup_opened",this.open=this.open.bind(this),this.close=this.close.bind(this),this._handleEscClose=this._handleEscClose.bind(this),this._buttonCLoseElement=this._popupElement.querySelector(".popup__close-button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add(this._popupOpenClass),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove(this._popupOpenClass),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("mousedown",(function(t){t.target!==t.currentTarget&&t.target!==e._buttonCLoseElement||e.close()}))}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function _(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(e){var t,n=e.popupSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,{popupSelector:n}))._imageElement=t._popupElement.querySelector(".popup__image"),t._captionElement=t._popupElement.querySelector(".popup__image-caption"),t}return t=a,(n=[{key:"open",value:function(e,t){this._imageElement.src=t,this._imageElement.alt=e,this._captionElement.textContent=e,h(m(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},S.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,{popupSelector:n}))._handleFormSubmit=r,t._formElement=t._popupElement.querySelector(c),t._inputList=Array.from(t._formElement.querySelectorAll(".editing-form__input-line")),t._buttonSubmit=t._formElement.querySelector(".editing-form__button"),t._buttonInitialText=t._buttonSubmit.textContent,t.renderLoading=t.renderLoading.bind(w(t)),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputList.forEach((function(t){var n=t.value,r=t.name;e._inputValues[r]=n})),this._inputValues}},{key:"setinputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;S(L(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){e._handleFormSubmit(t,e._getInputValues())}))}},{key:"renderLoading",value:function(e){this._buttonSubmit.textContent=e?"Сохранение...":this._buttonInitialText}},{key:"close",value:function(){S(L(a.prototype),"close",this).call(this),this._formElement.reset()}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=T(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function q(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return q(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,{popupSelector:n}))._formElement=t._popupElement.querySelector(c),t._handleFormSubmit=r,t}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;P(A(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._item)}))}},{key:"open",value:function(e){this._item=e,P(A(a.prototype),"open",this).call(this)}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t,n,r,o,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t.link,this._name=t.name,this._arrayOfLikes=t.likes,this.cardId=t._id,this.config=n,this._userId=r,this._cardOwnerId=t.owner._id,this._handleCardClick=o,this._handleDeleteCard=i,this._toggleLikeServer=a}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this.config.cardTemplateSelector).content.querySelector(this.config.contentTemplateSelector).cloneNode(!0)}},{key:"_toggleLike",value:function(){this._buttonLike.classList.toggle(this.config.buttonLikeActiveClass)}},{key:"_setEventListeners",value:function(){var e=this;this._elementImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)})),this._buttonDelete.addEventListener("click",(function(){e._handleDeleteCard(e)})),this._buttonLike.addEventListener("click",(function(){e._toggleLikeServer(e._isLiked,e.cardId).then((function(t){e._checkLiked(t.likes),e._toggleLike(),e._setLikesNumber(t.likes)})).catch((function(e){console.log(e)}))}))}},{key:"_setLikesNumber",value:function(e){this._likesCounter.textContent=e.length}},{key:"_checkLiked",value:function(e){var t=this;this._isLiked=e.some((function(e){return e._id===t._userId}))}},{key:"_checkRemoveDelButton",value:function(){this._cardOwnerId!==this._userId&&this._buttonDelete.remove()}},{key:"deleteCard",value:function(){this._element.remove()}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._buttonLike=this._element.querySelector(this.config.buttonLikeSelector),this._buttonDelete=this._element.querySelector(this.config.buttonDeleteSelector),this._elementImage=this._element.querySelector(this.config.imageSelector),this._elementName=this._element.querySelector(this.config.locationSelector),this._likesCounter=this._element.querySelector(this.config.likesCounterSelector),this._setEventListeners(),this._checkRemoveDelButton(),this._checkLiked(this._arrayOfLikes),this._isLiked&&this._toggleLike(),this._elementImage.src=this._link,this._elementImage.alt=this._name,this._elementName.textContent=this._name,this._setLikesNumber(this._arrayOfLikes),this._element}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e,t){"prepend"===t?this._container.prepend(e):"append"===t&&this._container.append(e)}},{key:"renderItem",value:function(e,t){this._renderer(e,t)}},{key:"renderItems",value:function(e,t){var n=this;e.forEach((function(e){n._renderer(e,t)}))}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),H(this,"_showInputError",(function(e,t){var n=r._formElement.querySelector("".concat(r._spanErrorSelector).concat(e.id));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),H(this,"_hideInputError",(function(e){var t=r._formElement.querySelector("".concat(r._spanErrorSelector).concat(e.id));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),this._formElement=n,this._inputSelector=t.inputSelector,this._errorSelector=t.errorSelector,this._spanErrorSelector=t.spanErrorSelector,this._submitButtonSelector=t.submitButtonSelector,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._inactiveButtonClass=t.inactiveButtonClass,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M,z={},$=new t({host:"https://mesto.nomoreparties.co/v1/cohort-47",token:"fecf0c0a-0938-47a0-bc3a-dfac6e5ffd59"}),G=new r({config:{nameSelector:".profile__name",aboutSelfSelector:".profile__about-self",profileImageSelector:".profile__image"}}),K=new b({popupSelector:".popup_contain_picture"}),Q=new C({popupSelector:".popup_contain_edit-profile",handleFormSubmit:function(e,t){e.preventDefault(),Q.renderLoading(!0),$.setUserInfo(t).then((function(e){G.setUserInfo(e),Q.close()})).catch((function(e){return console.log(e)})).finally((function(){Q.renderLoading(!1)}))}}),W=new C({popupSelector:".popup_contain_add-cards",handleFormSubmit:function(e,t){e.preventDefault(),W.renderLoading(!0),$.addCard(t).then((function(e){Z.renderItem(e,"prepend"),W.close()})).catch((function(e){return console.log(e)})).finally((function(){W.renderLoading(!1)}))}}),X=new C({popupSelector:".popup_contain_edit-avatar",handleFormSubmit:function(e,t){e.preventDefault(),X.renderLoading(!0),$.setAvatar(t).then((function(e){G.setUserAvatar(e),X.close()})).catch((function(e){return console.log(e)})).finally((function(){X.renderLoading(!1)}))}}),Y=new B({popupSelector:".popup_contain_confirm",handleFormSubmit:function(e){$.deleteCard(e.cardId).then((function(){e.deleteCard(),Y.close()})).catch((function(e){return console.log(e)}))}}),Z=new V({renderer:function(e,t){var n=G.getUserId(),r=new x(e,u,n,ee,te,ne).generateCard();Z.addItem(r,t)}},".elements"),ee=function(e,t){K.open(e,t)},te=function(e){Y.open(e)},ne=function(e,t){return $.toggleLike(e,t)};Promise.all([$.getUserInfo(),$.getCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];G.setUserInfo(o),G.setUserAvatar(o),G.setUserId(o),Z.renderItems(i,"append")})).catch((function(e){return console.log("".concat(e," при первичной загрузке данных"))})),o.addEventListener("click",(function(){var e=G.getUserInfo();Q.setinputValues(e),Q.open(),z.editingForm.resetValidation()})),a.addEventListener("click",(function(){X.open(),z["edit-avatar"].resetValidation()})),i.addEventListener("click",(function(){W.open(),z.addCards.resetValidation()})),K.setEventListeners(),Q.setEventListeners(),W.setEventListeners(),Y.setEventListeners(),X.setEventListeners(),M={formSelector:".editing-form",inputSelector:".editing-form__input-line",errorSelector:".editing-form__input-error",spanErrorSelector:".editing-form__input-error_for_",submitButtonSelector:".editing-form__button",inputErrorClass:"editing-form__input-line_type_error",errorClass:"editing-form__input-error_active",inactiveButtonClass:"editing-form__button_inactive"},Array.from(document.querySelectorAll(M.formSelector)).forEach((function(e){var t=new J(M,e),n=e.getAttribute("name");z[n]=t,t.enableValidation()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW5ERW5MLEVSbkdNLENBQzlCZSxhQUFjLGdCQUNkZ0gsY0FBZSw0QkFDZkUsY0FBZSw2QkFDZkMsa0JBQW1CLGtDQUNuQkUscUJBQXNCLHdCQUN0QkMsZ0JBQWlCLHNDQUNqQkMsV0FBWSxtQ0FDWkUsb0JBQXFCLGlDUTRGSnBGLE1BQU1DLEtBQUtwRCxTQUFTcUQsaUJBQWlCdEQsRUFBT2UsZUFDcEQ0QyxTQUFRLFNBQUM2RCxHQUNoQixJQUFNNEQsRUFBWSxJQUFJN0QsRUFBY3ZILEVBQVF3SCxHQUN0QzZELEVBQVc3RCxFQUFZOEQsYUFBYSxRQUUxQ25DLEVBQWVrQyxHQUFZRCxFQUMzQkEsRUFBVUcsa0JBQ1gsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZ0FwaSkge1xyXG4gICAgdGhpcy5faG9zdCA9IGNvbmZpZ0FwaS5ob3N0O1xyXG4gICAgdGhpcy5fdG9rZW4gPSBjb25maWdBcGkudG9rZW47XHJcbiAgfVxyXG5cclxuICBfZ2V0SnNvbk9yRXJyb3IocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIF9nZXRIZWFkZXJzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fZ2V0SnNvbk9yRXJyb3IpXHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faG9zdH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fZ2V0SnNvbk9yRXJyb3IpXHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2hvc3R9L3VzZXJzL21lL2F2YXRhciBgLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhclxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgIC50aGVuKHRoaXMuX2dldEpzb25PckVycm9yKVxyXG4gICAgXHJcbiAgfVxyXG5cclxuICBnZXRDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5fZ2V0SGVhZGVycygpXHJcbiAgICB9KVxyXG4gICAgLnRoZW4odGhpcy5fZ2V0SnNvbk9yRXJyb3IpXHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9ob3N0fS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2dldEhlYWRlcnMoKSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBsaW5rOiBkYXRhLmxpbmtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9nZXRKc29uT3JFcnJvcilcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faG9zdH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9nZXRIZWFkZXJzKCksXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlTGlrZShpc0xpa2VkLCBjYXJkSWQpIHtcclxuICAgIGxldCBtZXRob2Q7XHJcbiAgICBpZiAoaXNMaWtlZCkge1xyXG4gICAgICBtZXRob2QgPSAnREVMRVRFJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG1ldGhvZCA9ICdQVVQnXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5faG9zdH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGAke21ldGhvZH1gLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9nZXRIZWFkZXJzKClcclxuICAgIH0pXHJcbiAgICAudGhlbih0aGlzLl9nZXRKc29uT3JFcnJvcilcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBjb25maWcgfSkge1xyXG4gICAgdGhpcy5uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcubmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5hYm91dFNlbGZTZWxlY3Rvcik7XHJcbiAgICB0aGlzLnByb2ZpbGVJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnByb2ZpbGVJbWFnZVNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudXNlckluZm8gPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMubmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5hYm91dC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyQXZhdGFyKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvZmlsZUltYWdlLnNyYztcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoZGF0YSkge1xyXG4gICAgdGhpcy5wcm9maWxlSW1hZ2Uuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pZDtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJZChkYXRhKSB7XHJcbiAgICB0aGlzLmlkID0gZGF0YS5faWQ7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJleHBvcnQgY29uc3Qgb3BlbkVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBvcGVuQWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJyk7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZENvbnRhaW5lclNlbGVjdG9yID0gJy5lbGVtZW50cyc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlU2VsZWN0b3IgPSAnLnBvcHVwX19pbWFnZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlQ2FwdGlvblNlbGVjdG9yID0gJy5wb3B1cF9faW1hZ2UtY2FwdGlvbic7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFdpdGhJbWFnZVNlbGVjdG9yID0gJy5wb3B1cF9jb250YWluX3BpY3R1cmUnO1xyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yID0gJy5wb3B1cF9jb250YWluX2VkaXQtcHJvZmlsZSc7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRBdmF0YXJTZWxlY3RvciA9ICcucG9wdXBfY29udGFpbl9lZGl0LWF2YXRhcic7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEFkZENhcmRzU2VsZWN0b3IgPSAnLnBvcHVwX2NvbnRhaW5fYWRkLWNhcmRzJztcclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aENvbmZpcm1TZWxlY3RvciA9ICcucG9wdXBfY29udGFpbl9jb25maXJtJztcclxuZXhwb3J0IGNvbnN0IGZvcm1TZWxlY3RvciA9ICcuZWRpdGluZy1mb3JtJztcclxuZXhwb3J0IGNvbnN0IGlucHV0U2VsZWN0b3IgPSAnLmVkaXRpbmctZm9ybV9faW5wdXQtbGluZSc7XHJcbmV4cG9ydCBjb25zdCBidXR0b25TdWJtaXRTZWxlY3RvciA9ICcuZWRpdGluZy1mb3JtX19idXR0b24nO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZ1Byb2ZpbGUgPSB7XHJcbiAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gIGFib3V0U2VsZlNlbGVjdG9yOiAnLnByb2ZpbGVfX2Fib3V0LXNlbGYnLFxyXG4gIHByb2ZpbGVJbWFnZVNlbGVjdG9yOiAnLnByb2ZpbGVfX2ltYWdlJyxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZ0NhcmQgPSB7XHJcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3I6ICcjY2FyZC10ZW1wbGF0ZScsXHJcbiAgY29udGVudFRlbXBsYXRlU2VsZWN0b3I6ICcuZWxlbWVudHNfX2VsZW1lbnQnLFxyXG4gIGJ1dHRvbkxpa2VTZWxlY3RvcjogJy5lbGVtZW50c19fYnV0dG9uLWxpa2UnLFxyXG4gIGxpa2VzQ291bnRlclNlbGVjdG9yOiAnLmVsZW1lbnRzX19saWtlcy1jb3VudGVyJyxcclxuICBidXR0b25EZWxldGVTZWxlY3RvcjogJy5lbGVtZW50c19fYnV0dG9uLWRlbGV0ZScsXHJcbiAgaW1hZ2VTZWxlY3RvcjogJy5lbGVtZW50c19faW1hZ2UnLFxyXG4gIGxvY2F0aW9uU2VsZWN0b3I6ICcuZWxlbWVudHNfX2xvY2F0aW9uJyxcclxuICBidXR0b25MaWtlQWN0aXZlQ2xhc3M6ICdlbGVtZW50c19fYnV0dG9uLWxpa2VfYWN0aXZlJyxcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZ0FwaSA9IHtcclxuICBob3N0OiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00NycsXHJcbiAgdG9rZW46ICdmZWNmMGMwYS0wOTM4LTQ3YTAtYmMzYS1kZmFjNmU1ZmZkNTknXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWdWYWxpZGF0aW9uID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5lZGl0aW5nLWZvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcuZWRpdGluZy1mb3JtX19pbnB1dC1saW5lJyxcclxuICBlcnJvclNlbGVjdG9yOiAnLmVkaXRpbmctZm9ybV9faW5wdXQtZXJyb3InLFxyXG4gIHNwYW5FcnJvclNlbGVjdG9yOiAnLmVkaXRpbmctZm9ybV9faW5wdXQtZXJyb3JfZm9yXycsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZWRpdGluZy1mb3JtX19idXR0b24nLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ2VkaXRpbmctZm9ybV9faW5wdXQtbGluZV90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAnZWRpdGluZy1mb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdlZGl0aW5nLWZvcm1fX2J1dHRvbl9pbmFjdGl2ZScsXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3J9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBPcGVuQ2xhc3MgPSAncG9wdXBfb3BlbmVkJztcclxuICAgIHRoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2J1dHRvbkNMb3NlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpXHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fcG9wdXBPcGVuQ2xhc3MpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBPcGVuQ2xhc3MpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGV2dCA9PiB7XHJcbiAgICAgIGlmICgoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQpXHJcbiAgICAgICAgfHwgKGV2dC50YXJnZXQgPT09IHRoaXMuX2J1dHRvbkNMb3NlRWxlbWVudCkpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufSIsImltcG9ydCB7cG9wdXBJbWFnZVNlbGVjdG9yLCBwb3B1cEltYWdlQ2FwdGlvblNlbGVjdG9yfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcbmltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHtwb3B1cFNlbGVjdG9yfSkge1xyXG4gICAgc3VwZXIoe3BvcHVwU2VsZWN0b3J9KTtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwSW1hZ2VTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jYXB0aW9uRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwSW1hZ2VDYXB0aW9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IGZvcm1TZWxlY3RvciwgaW5wdXRTZWxlY3RvciwgYnV0dG9uU3VibWl0U2VsZWN0b3J9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXR9KSB7XHJcbiAgICBzdXBlcih7cG9wdXBTZWxlY3Rvcn0pO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uU3VibWl0ID0gIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uU3VibWl0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYnV0dG9uSW5pdGlhbFRleHQgPSB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLnJlbmRlckxvYWRpbmcgPSB0aGlzLnJlbmRlckxvYWRpbmcuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSBpbnB1dEVsZW1lbnQudmFsdWU7XHJcbiAgICAgIGNvbnN0IGlucHV0TmFtZSA9IGlucHV0RWxlbWVudC5uYW1lO1xyXG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dE5hbWVdID0gaW5wdXRWYWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0aW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSBkYXRhW2lucHV0RWxlbWVudC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGV2dCwgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvblN1Ym1pdC50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25TdWJtaXQudGV4dENvbnRlbnQgPSB0aGlzLl9idXR0b25Jbml0aWFsVGV4dDtcclxuICAgIH1cclxuICB9IFxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IGZvcm1TZWxlY3RvciB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2l0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGl0ZW0pIHtcclxuICAgIHRoaXMuX2l0ZW0gPSBpdGVtO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGl0ZW0sIGNvbmZpZ0NhcmQsIHVzZXJJZCwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVDYXJkLCB0b2dnbGVMaWtlU2VydmVyKSB7XHJcbiAgICB0aGlzLl9saW5rID0gaXRlbS5saW5rO1xyXG4gICAgdGhpcy5fbmFtZSA9IGl0ZW0ubmFtZTtcclxuICAgIHRoaXMuX2FycmF5T2ZMaWtlcyA9IGl0ZW0ubGlrZXM7XHJcbiAgICB0aGlzLmNhcmRJZCA9IGl0ZW0uX2lkO1xyXG4gICAgdGhpcy5jb25maWcgPSBjb25maWdDYXJkXHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9jYXJkT3duZXJJZCA9IGl0ZW0ub3duZXIuX2lkO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQgPSBoYW5kbGVEZWxldGVDYXJkO1xyXG4gICAgdGhpcy5fdG9nZ2xlTGlrZVNlcnZlciA9IHRvZ2dsZUxpa2VTZXJ2ZXI7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuY29uZmlnLmNhcmRUZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLmNvbmZpZy5jb250ZW50VGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlTGlrZSgpIHtcclxuICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLmNvbmZpZy5idXR0b25MaWtlQWN0aXZlQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9idXR0b25EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQodGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl90b2dnbGVMaWtlU2VydmVyKHRoaXMuX2lzTGlrZWQsIHRoaXMuY2FyZElkKVxyXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9jaGVja0xpa2VkKGRhdGEubGlrZXMpO1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xyXG4gICAgICAgICAgdGhpcy5fc2V0TGlrZXNOdW1iZXIoZGF0YS5saWtlcylcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7IGNvbnNvbGUubG9nKGVycikgfSlcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldExpa2VzTnVtYmVyKGFycikge1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gYXJyLmxlbmd0aDtcclxuICB9XHJcblxyXG4gIF9jaGVja0xpa2VkKGFycmF5KSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gYXJyYXkuc29tZSgoaXRlbSkgPT4ge1xyXG4gICAgICByZXR1cm4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVtb3ZlRGVsQnV0dG9uKCkge1xyXG4gICAgaWYgKHRoaXMuX2NhcmRPd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jb25maWcuYnV0dG9uTGlrZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2J1dHRvbkRlbGV0ZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmNvbmZpZy5idXR0b25EZWxldGVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9lbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jb25maWcuaW1hZ2VTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9lbGVtZW50TmFtZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmNvbmZpZy5sb2NhdGlvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2xpa2VzQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmNvbmZpZy5saWtlc0NvdW50ZXJTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2NoZWNrUmVtb3ZlRGVsQnV0dG9uKCk7XHJcbiAgICB0aGlzLl9jaGVja0xpa2VkKHRoaXMuX2FycmF5T2ZMaWtlcyk7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkgeyB0aGlzLl90b2dnbGVMaWtlKCkgfTtcclxuICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50TmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9zZXRMaWtlc051bWJlcih0aGlzLl9hcnJheU9mTGlrZXMpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCwgbWV0aG9kKSB7XHJcbiAgICBpZiAobWV0aG9kID09PSAncHJlcGVuZCcpIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9IGVsc2UgaWYgKG1ldGhvZCA9PT0gJ2FwcGVuZCcpIHtcclxuICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtKGl0ZW0sIG1ldGhvZCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgbWV0aG9kKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zLCBtZXRob2QpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSwgbWV0aG9kKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZGF0YSwgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gZGF0YS5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fZXJyb3JTZWxlY3RvciA9IGRhdGEuZXJyb3JTZWxlY3RvcjtcclxuICAgIHRoaXMuX3NwYW5FcnJvclNlbGVjdG9yID0gZGF0YS5zcGFuRXJyb3JTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gZGF0YS5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGRhdGEuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGRhdGEuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBkYXRhLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXlcclxuICAgICAgLmZyb20odGhpcy5fZm9ybUVsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIC8vINGB0LHRgNC+0YEg0L7RiNC40LHQvtC6XHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vINC/0L7QutCw0LfQsNGC0Ywg0L7RiNC40LHQutGDXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX3NwYW5FcnJvclNlbGVjdG9yfSR7aW5wdXRFbGVtZW50LmlkfWApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIC8vINGB0LrRgNGL0YLRjCDQvtGI0LjQsdC60YNcclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAke3RoaXMuX3NwYW5FcnJvclNlbGVjdG9yfSR7aW5wdXRFbGVtZW50LmlkfWApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfTtcclxuXHJcbiAgLy8g0L/RgNC+0LLQtdGA0LjRgtGMINCy0LDQu9C40LTQvdC+0YHRgtGMINC/0L7Qu9GPINCy0LLQvtC00LBcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyDQv9GA0L7QstC10YDQuNGC0Ywg0LLQsNC70LjQtNC90L7RgdGC0Ywg0LzQsNGB0YHQuNCy0LAg0L/QvtC70LXQuSDQstCy0L7QtNCwXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8g0LDQutGC0LjQstCw0YbQuNGPINC4INC00LXQt9Cw0LrRgtC40LLQsNGG0LjRjyDQutC90L7Qv9C60Lgg0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvNGLXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vINC00L7QsdCw0LLQuNGC0Ywg0YHQu9GD0YjQsNGC0LXQu9C4INCy0LLQvtC00LBcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyDQsNC60YLQuNCy0LjRgNC+0LLRgtGMINCy0LDQu9C40LTQsNGG0LjRjlxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnXHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMuanMnXHJcbmltcG9ydCBDYXJkIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gIG9wZW5FZGl0UHJvZmlsZUJ1dHRvbixcclxuICBvcGVuQWRkQ2FyZEJ1dHRvbixcclxuICBhdmF0YXJFbGVtZW50LFxyXG4gIGNvbmZpZ1ZhbGlkYXRpb24sXHJcbiAgY29uZmlnQXBpLFxyXG4gIGNvbmZpZ0NhcmQsXHJcbiAgY29uZmlnUHJvZmlsZSxcclxuICBjYXJkQ29udGFpbmVyU2VsZWN0b3IsXHJcbiAgcG9wdXBXaXRoSW1hZ2VTZWxlY3RvcixcclxuICBwb3B1cEVkaXRQcm9maWxlU2VsZWN0b3IsXHJcbiAgcG9wdXBFZGl0QXZhdGFyU2VsZWN0b3IsXHJcbiAgcG9wdXBBZGRDYXJkc1NlbGVjdG9yLFxyXG4gIHBvcHVwV2l0aENvbmZpcm1TZWxlY3RvcixcclxufSBmcm9tICcuLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcblxyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGNvbmZpZ0FwaSk7XHJcblxyXG4vLyDRjdC60LcuINC60LvQsNGB0YHQsCDQuNC90YTQvtGA0LzQsNGG0YbQuNC4INC/0YDQvtGE0LjQu9GPXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBjb25maWc6IGNvbmZpZ1Byb2ZpbGUsXHJcbn0pO1xyXG5cclxuLy8g0Y3QutC3LiDQutC70LDRgdGB0LAg0L7QutC90LAg0L/RgNC+0YHQvNC+0YLRgNCwINC40LfQvtCx0YDQsNC20LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7IHBvcHVwU2VsZWN0b3I6IHBvcHVwV2l0aEltYWdlU2VsZWN0b3IgfSk7XHJcblxyXG4vLyDRjdC60LcuINC60LvQsNGB0YHQsCDQvtC60L3QsCDRgSDRhNC+0YDQvNC+0Lkg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG5jb25zdCBwb3B1cFdpdGhGb3JtRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChldnQsIGZvcm1EYXRhKSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHBvcHVwV2l0aEZvcm1FZGl0UHJvZmlsZS5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpLnNldFVzZXJJbmZvKGZvcm1EYXRhKVxyXG4gICAgLnRoZW4oKGpzb25EYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGpzb25EYXRhKTtcclxuICAgICAgcG9wdXBXaXRoRm9ybUVkaXRQcm9maWxlLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgLmZpbmFsbHkoKCk9PiB7XHJcbiAgICAgIHBvcHVwV2l0aEZvcm1FZGl0UHJvZmlsZS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pXHJcbiAgfVxyXG59KTtcclxuXHJcbi8vINGN0LrQty4g0LrQu9Cw0YHRgdCwINC+0LrQvdCwINGBINGE0L7RgNC80L7QuSDQtNC+0LHQsNCy0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQtdC6XHJcbmNvbnN0IHBvcHVwV2l0aEZvcm1BZGRDYXJkcyA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwb3B1cEFkZENhcmRzU2VsZWN0b3IsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGV2dCwgZm9ybURhdGEpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcG9wdXBXaXRoRm9ybUFkZENhcmRzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGkuYWRkQ2FyZChmb3JtRGF0YSlcclxuICAgIC50aGVuKChqc29uRGF0YSkgPT4ge1xyXG4gICAgICBjYXJkTGlzdC5yZW5kZXJJdGVtKGpzb25EYXRhLCAncHJlcGVuZCcpO1xyXG4gICAgICBwb3B1cFdpdGhGb3JtQWRkQ2FyZHMuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAuZmluYWxseSgoKT0+IHtcclxuICAgICAgcG9wdXBXaXRoRm9ybUFkZENhcmRzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSlcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g0Y3QutC3LiDQutC70LDRgdGB0LAg0L7QutC90LAg0YEg0YTQvtGA0LzQvtC5INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxuY29uc3QgcG9wdXBXaXRoRm9ybUVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBFZGl0QXZhdGFyU2VsZWN0b3IsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGV2dCwgZm9ybURhdGEpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcG9wdXBXaXRoRm9ybUVkaXRBdmF0YXIucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGFwaS5zZXRBdmF0YXIoZm9ybURhdGEpXHJcbiAgICAudGhlbigoanNvbkRhdGEpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihqc29uRGF0YSk7XHJcbiAgICAgIHBvcHVwV2l0aEZvcm1FZGl0QXZhdGFyLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgLmZpbmFsbHkoKCk9PiB7XHJcbiAgICAgIHBvcHVwV2l0aEZvcm1FZGl0QXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSlcclxuICB9XHJcbn0pO1xyXG5cclxuLy8g0Y3QutC3LiDQutC70LDRgdGB0LAg0L7QutC90LAg0YEg0L/QvtC00YLQstC10YDQttC10L3QuNC10Lwg0YPQtNCw0LvQtdC90LjRj1xyXG5jb25zdCBwb3B1cFdpdGhDb25maXJtRGVsID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbih7XHJcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBXaXRoQ29uZmlybVNlbGVjdG9yLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChpdGVtLmNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGl0ZW0uZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgIHBvcHVwV2l0aENvbmZpcm1EZWwuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gIH1cclxufSk7XHJcblxyXG4vLyDRjdC60LcuINC60LvQsNGB0YHQsCBTZWN0aW9uINC00LvRjyDQvtGC0YDQuNGB0L7QstC60Lgg0LrQsNGA0YLQvtGH0LXQulxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGl0ZW0sIG1ldGhvZCkgPT4ge1xyXG4gICAgY29uc3QgdXNlcklkID0gdXNlckluZm8uZ2V0VXNlcklkKCk7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICAgIGl0ZW0sXHJcbiAgICAgIGNvbmZpZ0NhcmQsXHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgICBoYW5kbGVEZWxldGVDYXJkLFxyXG4gICAgICBoYW5kbGVCdG5MaWtlKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQsIG1ldGhvZCk7XHJcbiAgfVxyXG59LCBjYXJkQ29udGFpbmVyU2VsZWN0b3IpO1xyXG5cclxuLy8g0L7QsdGA0LDQsdC+0YLQsNGC0Ywg0LrQu9C40Log0L/QviDQuNC30L7QsdGA0LDQttC10L3QuNGOINC60LDRgNGC0L7Rh9C60LhcclxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKG5hbWUsIGxpbmspID0+IHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG4vLyDQvtCx0YDQsNCx0L7RgtCw0YLRjCDQutC70LjQuiDQv9C+INC40LrQvtC90LrQtSDRg9C00LDQu9C10L3QuNGPXHJcbmNvbnN0IGhhbmRsZURlbGV0ZUNhcmQgPSAoaXRlbSkgPT4ge1xyXG4gIHBvcHVwV2l0aENvbmZpcm1EZWwub3BlbihpdGVtKTtcclxufVxyXG5cclxuLy8g0L7QsdGA0LDQsdC+0YLQsNGC0Ywg0LrQu9C40Log0L/QviDQuNC60L7QvdC60LUg0LvQsNC50LrQsFxyXG5jb25zdCBoYW5kbGVCdG5MaWtlID0gKGNhcmRJZCwgaXNMaWtlZCkgPT4ge1xyXG4gIHJldHVybiBhcGkudG9nZ2xlTGlrZShjYXJkSWQsIGlzTGlrZWQpO1xyXG59XHJcblxyXG4vLyDQstC60LvRjtGH0LjRgtGMINCy0LvQuNC00LDRhtC40Y4g0LTQu9GPINCy0YHQtdGFINGE0L7RgNC8XHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3RvcikpXHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpXHJcbiAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZSgnbmFtZScpO1xyXG5cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vINC30LDQs9GA0YPQt9C40YLRjCDQuCDQvtGC0L7QsdGA0LDQt9C40YLRjCDQtNCw0L3QvdGL0LUg0L/RgNC+0YTQuNC70Y8g0Lgg0LrQsNGA0YLQvtGH0LrQuFxyXG5Qcm9taXNlLmFsbChbXHJcbiAgYXBpLmdldFVzZXJJbmZvKCksXHJcbiAgYXBpLmdldENhcmRzKCksXHJcbl0pXHJcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNEYXRhXSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySWQodXNlckRhdGEpO1xyXG5cclxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKGNhcmRzRGF0YSwgJ2FwcGVuZCcpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhgJHtlcnJ9INC/0YDQuCDQv9C10YDQstC40YfQvdC+0Lkg0LfQsNCz0YDRg9C30LrQtSDQtNCw0L3QvdGL0YVgKSk7XHJcblxyXG4vLyAqLS0tLS0tLS0tLS0tLS0tLS0tLdCh0LvRg9GI0LDRgtC10LvQuCDRgdC+0LHRi9GC0LjQuS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vLyDQvtGC0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNC40LvRj1xyXG5vcGVuRWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgZGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcG9wdXBXaXRoRm9ybUVkaXRQcm9maWxlLnNldGlucHV0VmFsdWVzKGRhdGEpO1xyXG4gIHBvcHVwV2l0aEZvcm1FZGl0UHJvZmlsZS5vcGVuKCk7XHJcbiAgZm9ybVZhbGlkYXRvcnNbJ2VkaXRpbmdGb3JtJ10ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy8g0L7RgtC60YDRi9GC0LjQtSDRhNC+0YDQvNGLINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxuYXZhdGFyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cFdpdGhGb3JtRWRpdEF2YXRhci5vcGVuKClcclxuICBmb3JtVmFsaWRhdG9yc1snZWRpdC1hdmF0YXInXS5yZXNldFZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG4vLyDQvtGC0LrRgNGL0YLQuNC1INGE0L7RgNC80Ysg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LXQulxyXG5vcGVuQWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cFdpdGhGb3JtQWRkQ2FyZHMub3BlbigpXHJcbiAgZm9ybVZhbGlkYXRvcnNbJ2FkZENhcmRzJ10ucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoRm9ybUVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEZvcm1BZGRDYXJkcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhDb25maXJtRGVsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEZvcm1FZGl0QXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnVmFsaWRhdGlvbik7Il0sIm5hbWVzIjpbIkFwaSIsImNvbmZpZ0FwaSIsInRoaXMiLCJfaG9zdCIsImhvc3QiLCJfdG9rZW4iLCJ0b2tlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJhdXRob3JpemF0aW9uIiwiZmV0Y2giLCJoZWFkZXJzIiwiX2dldEhlYWRlcnMiLCJ0aGVuIiwiX2dldEpzb25PckVycm9yIiwiZGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImFib3V0IiwiYXZhdGFyIiwibGluayIsImNhcmRJZCIsImlzTGlrZWQiLCJVc2VySW5mbyIsImNvbmZpZyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZlNlbGVjdG9yIiwicHJvZmlsZUltYWdlIiwicHJvZmlsZUltYWdlU2VsZWN0b3IiLCJ1c2VySW5mbyIsInRleHRDb250ZW50Iiwic3JjIiwiaWQiLCJfaWQiLCJvcGVuRWRpdFByb2ZpbGVCdXR0b24iLCJvcGVuQWRkQ2FyZEJ1dHRvbiIsImF2YXRhckVsZW1lbnQiLCJmb3JtU2VsZWN0b3IiLCJjb25maWdDYXJkIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJjb250ZW50VGVtcGxhdGVTZWxlY3RvciIsImJ1dHRvbkxpa2VTZWxlY3RvciIsImxpa2VzQ291bnRlclNlbGVjdG9yIiwiYnV0dG9uRGVsZXRlU2VsZWN0b3IiLCJpbWFnZVNlbGVjdG9yIiwibG9jYXRpb25TZWxlY3RvciIsImJ1dHRvbkxpa2VBY3RpdmVDbGFzcyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfcG9wdXBPcGVuQ2xhc3MiLCJvcGVuIiwiYmluZCIsImNsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2J1dHRvbkNMb3NlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlRWxlbWVudCIsIl9jYXB0aW9uRWxlbWVudCIsImFsdCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25TdWJtaXQiLCJfYnV0dG9uSW5pdGlhbFRleHQiLCJyZW5kZXJMb2FkaW5nIiwiX2lucHV0VmFsdWVzIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsImlucHV0VmFsdWUiLCJ2YWx1ZSIsImlucHV0TmFtZSIsIl9nZXRJbnB1dFZhbHVlcyIsImlzTG9hZGluZyIsInJlc2V0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwicHJldmVudERlZmF1bHQiLCJfaXRlbSIsIml0ZW0iLCJDYXJkIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsInRvZ2dsZUxpa2VTZXJ2ZXIiLCJfbGluayIsIl9uYW1lIiwiX2FycmF5T2ZMaWtlcyIsImxpa2VzIiwiX3VzZXJJZCIsIl9jYXJkT3duZXJJZCIsIm93bmVyIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX3RvZ2dsZUxpa2VTZXJ2ZXIiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2J1dHRvbkxpa2UiLCJ0b2dnbGUiLCJfZWxlbWVudEltYWdlIiwiX2J1dHRvbkRlbGV0ZSIsIl9pc0xpa2VkIiwiX2NoZWNrTGlrZWQiLCJfdG9nZ2xlTGlrZSIsIl9zZXRMaWtlc051bWJlciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFyciIsIl9saWtlc0NvdW50ZXIiLCJsZW5ndGgiLCJhcnJheSIsInNvbWUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9lbGVtZW50TmFtZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jaGVja1JlbW92ZURlbEJ1dHRvbiIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYXBwZW5kIiwiaXRlbXMiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfc3BhbkVycm9yU2VsZWN0b3IiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfZXJyb3JTZWxlY3RvciIsImVycm9yU2VsZWN0b3IiLCJzcGFuRXJyb3JTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9idXR0b25FbGVtZW50IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2hpZGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImZvcm1WYWxpZGF0b3JzIiwiYXBpIiwicG9wdXBXaXRoSW1hZ2UiLCJwb3B1cFdpdGhGb3JtRWRpdFByb2ZpbGUiLCJmb3JtRGF0YSIsInNldFVzZXJJbmZvIiwianNvbkRhdGEiLCJmaW5hbGx5IiwicG9wdXBXaXRoRm9ybUFkZENhcmRzIiwiYWRkQ2FyZCIsImNhcmRMaXN0IiwicmVuZGVySXRlbSIsInBvcHVwV2l0aEZvcm1FZGl0QXZhdGFyIiwic2V0QXZhdGFyIiwic2V0VXNlckF2YXRhciIsInBvcHVwV2l0aENvbmZpcm1EZWwiLCJkZWxldGVDYXJkIiwiZ2V0VXNlcklkIiwiY2FyZEVsZW1lbnQiLCJoYW5kbGVCdG5MaWtlIiwiZ2VuZXJhdGVDYXJkIiwiYWRkSXRlbSIsInRvZ2dsZUxpa2UiLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldENhcmRzIiwidXNlckRhdGEiLCJjYXJkc0RhdGEiLCJzZXRVc2VySWQiLCJyZW5kZXJJdGVtcyIsInNldGlucHV0VmFsdWVzIiwicmVzZXRWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9